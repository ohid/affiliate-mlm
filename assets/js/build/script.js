!function(e){document.addEventListener("DOMContentLoaded",(function(){e(".add-new-referral").on("click",(function(){e(".referral-form").slideToggle()}));let t=document.getElementById("referral-form");t&&t.addEventListener("submit",(function(e){e.preventDefault(),n();const a=wc_add_to_cart_params.ajax_url;let r=new URLSearchParams(new FormData(t)),s=document.getElementById("username").value,o=document.getElementById("email").value;""==s||s.length<=4?n("error","Username should be at least 5 characters"):!1!==function(e){if(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e))return!0;return!1}(o)?(n("success","Submitting, please wait..."),fetch(a,{method:"POST",body:r}).then((e=>e.json())).catch((e=>{})).then((e=>{0!==e&&"error"!==e.status?1!==e&&"success"!==e.status||(n("success",e.message),t.reset()):n("error",e.message)}))):n("error","Email is not validated")})),e(".add-new-link").on("click",(function(){e(".affiliate-form").slideToggle()}));let a=document.getElementById("affiliate-form");a&&a.addEventListener("submit",(function(e){e.preventDefault(),n();const t=wc_add_to_cart_params.ajax_url;let r=new URLSearchParams(new FormData(a)),s=document.getElementById("product-link").value,o=document.getElementById("campaign-name").value,c=document.getElementById("affiliate-link");""!=s?""==o||o.length<=1?n("error","Campaign name should be at least 2 characters"):(n("success","Creating link, please wait..."),fetch(t,{method:"POST",body:r}).then((e=>e.json())).catch((e=>{})).then((e=>{0!==e&&"error"!==e.status?1!==e&&"success"!==e.status||(n("success","Affiliate link created successfully, please copy it"),c.value=e.message,c.focus(),c.select(),console.log(e.message)):n("error",e.message)}))):n("error","Please enter product link")}));document.querySelectorAll(".affiliate-links-table .affiliate-link input").forEach((function(e){e.addEventListener("focus",(function(){this.select()}))})),e("#payment-type").on("change",(function(){const t=e(this).val();var a;n(),a=t,e(".group-bkash-account").addClass("hide").removeClass("show"),e(".group-rocket-account").addClass("hide").removeClass("show"),e(".group-bank-account").addClass("hide").removeClass("show"),e(`.group-${a}-account`).addClass("show").removeClass("hide")}));let r=document.getElementById("withdraw-form");function n(e=null,t=null){const a=document.querySelector(".form-response");a.innerHTML=null===t?"":t,null!==e&&("error"===e?(a.classList.add("error"),a.classList.remove("success")):"success"===e&&(a.classList.add("success"),a.classList.remove("error")))}r&&r.addEventListener("submit",(function(e){e.preventDefault();const t=wc_add_to_cart_params.ajax_url,a=new URLSearchParams(new FormData(r)),s=document.getElementById("payment-type").value,o=document.getElementById("bkash-number").value,c=document.getElementById("rocket-number").value,l=document.getElementById("bank-account-name").value,u=document.getElementById("bank-account-number").value,d=document.getElementById("bank-name").value,i=document.getElementById("bank-branch").value,m=document.getElementById("withdraw-amount").value,h=document.querySelector("#withdraw-form .field-info .price");if(n(),"selectcard"!=s){if("bkash"===s){if(""==o.length)return void n("error","Please enter bKash number");if(o.length<11)return void n("error","bKash number should be at least 11 characters long")}if("rocket"===s){if(""==o.length)return void n("error","Please enter Rocket number");if(c.length<12)return void n("error","Rocket number should be at least 12 characters long")}if("bank"===s){if(""==l)return void n("error","Please enter your full bank account name");if(u.length<10)return void n("error","The bank account number should be at least 10 characters");if(""==d)return void n("error","Please enter bank account name");if(""==i)return void n("error","Please enter the branch name")}""==m||m.length<1?n("error","Please enter an amount"):isNaN(m)?n("error","Please enter a valid amount"):parseInt(m)<99?n("error","You can not withdraw less than 100 BDT"):(n("success","Submitting request, please wait..."),fetch(t,{method:"POST",body:a}).then((e=>e.json())).catch((e=>{})).then((e=>{0!==e&&"error"!==e.status?1!==e&&"success"!==e.status||(n("success",e.message),h.innerHTML=e.balance,r.reset()):n("error",e.message)})))}else n("error","Please select a payment type")}))}))}(jQuery);