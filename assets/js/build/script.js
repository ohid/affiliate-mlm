!function(e){document.addEventListener("DOMContentLoaded",(function(){e(".add-new-referral").on("click",(function(){e(".referral-form").slideToggle()}));let t=document.getElementById("referral-form");t&&t.addEventListener("submit",(function(e){e.preventDefault(),n();const r=wc_add_to_cart_params.ajax_url;let a=new URLSearchParams(new FormData(t)),s=document.getElementById("username").value,o=document.getElementById("email").value,l=document.getElementById("password").value;console.log(a),""==s||s.length<=4?n("error","Username should be at least 5 characters"):!1!==function(e){if(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e))return!0;return!1}(o)?""==l||l.length<=8?n("error","Password should be at least 8 characters"):(n("success","Submitting, please wait..."),fetch(r,{method:"POST",body:a}).then((e=>e.json())).catch((e=>{})).then((e=>{0!==e&&"error"!==e.status?1!==e&&"success"!==e.status||(n("success",e.message),t.reset()):n("error",e.message)}))):n("error","Email is not validated")}));e("#referral-users-table").on("click",".referral-expander",(function(){console.log("button clicked");var t=0,r=e(this);function a(){1==++t?r.html("."):2==t?r.html(".."):3==t&&(r.html("..."),t=0)}var a=setInterval(a,100);const n=e(this).closest("tr").data("user-id"),s=wc_add_to_cart_params.ajax_url;e.ajax({type:"POST",url:s,data:{action:"expand_referral_users",user_id:n},dataType:"json",success:function(e){if(0!==e&&"error"!==e.status){if(1===e||"success"===e.status){clearInterval(a),r.hide();let n=["one","two","three","four","five","six"],s=n[Math.floor(Math.random()*n.length)];for(let[a,n]of Object.entries(e.message)){var t=`<tr class="border-color-${s}" data-user-id="${n.id}">`;const e='<button class="referral-expander">+</button>';"has-referral"==n.referral_users?t+=`<td>${e} ${n.id}</td>`:t+=`<td>${n.id}</td>`,t+=`<td>${n.user_login}</td>`,t+=`<td>${n.user_email}</td>`,t+=`<td>${n.role}</td>`,t+=`<td>${n.points}</td>`,t+="</tr>",r.closest("tr").after(t)}}}else alert(e.message)},error:function(e){}})})),e(".add-new-link").on("click",(function(){e(".affiliate-form").slideToggle()}));let r=document.getElementById("affiliate-form");r&&r.addEventListener("submit",(function(e){e.preventDefault(),n();const t=wc_add_to_cart_params.ajax_url;let a=new URLSearchParams(new FormData(r)),s=document.getElementById("product-link").value,o=document.getElementById("campaign-name").value,l=document.getElementById("affiliate-link");""!=s?""==o||o.length<=1?n("error","Campaign name should be at least 2 characters"):(n("success","Creating link, please wait..."),fetch(t,{method:"POST",body:a}).then((e=>e.json())).catch((e=>{})).then((e=>{0!==e&&"error"!==e.status?1!==e&&"success"!==e.status||(n("success","Affiliate link created successfully, please copy it"),l.value=e.message,l.focus(),l.select(),console.log(e.message)):n("error",e.message)}))):n("error","Please enter product link")}));document.querySelectorAll(".affiliate-links-table .affiliate-link-td input").forEach((function(e){e.addEventListener("focus",(function(){this.select()}))})),e("#payment-type").on("change",(function(){const t=e(this).val();var r;n(),r=t,e(".group-bkash-account").addClass("hide").removeClass("show"),e(".group-rocket-account").addClass("hide").removeClass("show"),e(".group-bank-account").addClass("hide").removeClass("show"),e(`.group-${r}-account`).addClass("show").removeClass("hide")}));let a=document.getElementById("withdraw-form");function n(e=null,t=null){const r=document.querySelector(".form-response");r.innerHTML=null===t?"":t,null!==e&&("error"===e?(r.classList.add("error"),r.classList.remove("success")):"success"===e&&(r.classList.add("success"),r.classList.remove("error")))}a&&a.addEventListener("submit",(function(e){e.preventDefault();const t=wc_add_to_cart_params.ajax_url,r=new URLSearchParams(new FormData(a)),s=document.getElementById("payment-type").value,o=document.getElementById("bkash-number").value,l=document.getElementById("rocket-number").value,c=document.getElementById("bank-account-name").value,u=document.getElementById("bank-account-number").value,d=document.getElementById("bank-name").value,i=document.getElementById("bank-branch").value,m=document.getElementById("withdraw-amount").value,f=document.querySelector("#withdraw-form .field-info .price");if(n(),"selectcard"!=s){if("bkash"===s){if(""==o.length)return void n("error","Please enter bKash number");if(o.length<11)return void n("error","bKash number should be at least 11 characters long")}if("rocket"===s){if(""==l.length)return void n("error","Please enter Rocket number");if(l.length<12)return void n("error","Rocket number should be at least 12 characters long")}if("bank"===s){if(""==c)return void n("error","Please enter your full bank account name");if(u.length<10)return void n("error","The bank account number should be at least 10 characters");if(""==d)return void n("error","Please enter bank account name");if(""==i)return void n("error","Please enter the branch name")}""==m||m.length<1?n("error","Please enter an amount"):isNaN(m)?n("error","Please enter a valid amount"):parseInt(m)<99?n("error","You can not withdraw less than 100 BDT"):(n("success","Submitting request, please wait..."),fetch(t,{method:"POST",body:r}).then((e=>e.json())).catch((e=>{})).then((e=>{0!==e&&"error"!==e.status?1!==e&&"success"!==e.status||(n("success",e.message),f.innerHTML=e.balance,a.reset()):n("error",e.message)})))}else n("error","Please select a payment type")}))}))}(jQuery);